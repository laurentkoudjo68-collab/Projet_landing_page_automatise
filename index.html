<!doctype html>
<html lang="fr">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>WebPro - Création de sites WordPress performants et optimisés SEO</title>
    <meta name="description" content="Création de sites WordPress modernes, rapides et optimisés SEO. Des sites web conçus pour convertir vos visiteurs en clients." />
    <meta name="author" content="WebPro" />

    <meta property="og:title" content="WebPro - Création de sites WordPress" />
    <meta property="og:description" content="Sites web modernes, rapides et optimisés SEO pour propulser votre business." />
    <meta property="og:type" content="website" />
    <meta property="og:image" content="https://lovable.dev/opengraph-image-p98pqg.png" />

    <meta name="twitter:card" content="summary_large_image" />
    <meta name="twitter:site" content="@WebPro" />
    <meta name="twitter:image" content="https://lovable.dev/opengraph-image-p98pqg.png" />
    <link rel="canonical" href="https://webpro.com" />
  </head>

  <body>
    <div id="root"></div>
    <script type="module" src="/src/main.tsx"></script>
    <form id="formulaire-inscription" method="post">
  <label for="prenom">Prénom</label>
  <input type="text" id="prenom" name="prenom" required>
  
  <label for="email">Adresse e-mail</label>
  <input type="email" id="email" name="email" required>
  
  <button type="submit">S'inscrire</button>
</form>
<script>
    // 1. Définir l'URL du Webhook N8N (TON LIEN NGROK + CHEMIN)
    const N8N_WEBHOOK_URL = "https://nonapportionable-gertrudis-hurriedly.ngrok-free.dev/webhook-test/fd7ca709-4c53-41cc-a7bb-6b5816993123";

    // 2. Récupérer le formulaire par son ID
    const form = document.getElementById('formulaire-inscription');
    
    // 3. Ajouter un écouteur d'événement pour intercepter l'envoi du formulaire
    form.addEventListener('submit', function (e) {
        e.preventDefault(); // Empêche le comportement par défaut (rechargement de la page)

        // Récupérer les données du formulaire
        const data = new FormData(form);
        const payload = Object.fromEntries(data.entries());

        // Afficher un message d'attente
        alert("Envoi des données à n8n..."); 

        // Envoyer les données au Webhook N8N
        fetch(N8N_WEBHOOK_URL, {
            method: 'POST',
            headers: {
                'Content-Type': 'application/json' // Indique à n8n qu'on envoie du JSON
            },
            body: JSON.stringify(payload) // Convertir les données en format JSON
        })
        .then(response => {
            if (response.ok) {
                alert("SUCCESS : Vos données ont été reçues par n8n !");
                form.reset(); // Vider le formulaire après succès
            } else {
                alert("ERREUR : Problème lors de l'envoi à n8n.");
            }
        })
        .catch(error => {
            console.error('Erreur réseau:', error);
            alert("ERREUR : La connexion au serveur n8n a échoué.");
        });
    });
</script>
  </body>
</html>
